#ВНИМАНИЕ, WhatsApp ПРИНАДЛЕЖИТ Meta, КОТОРАЯ ПРИЗНАНА ЭКСТРЕМИСТСКОЙ ОРГАНИЗАЦИЕЙ И ЗАПРЕЩЕНА НА ТЕРРИТОРИИ РФ!!!

Этот проект представляет собой Telegram-бота, написанного на Python, для автоматизации отправки сообщений и файлов в WhatsApp.

Бот использует Playwright для взаимодействия с WhatsApp Web в headless-режиме и управляется через команды в Telegram.

## Настройка для разработки

По умолчанию бот настроен для продакшена с отключенными функциями отладки. Для включения отладки:

### Включение скриншотов для отладки
1. Откройте файл `bot.py`
2. Найдите функцию `take_screenshot`
3. Раскомментируйте код внутри функции
4. Закомментируйте пустышку
   
### Включение подробного логирования
1. В файле `bot.py` найдите строки:
```python
logging.getLogger("httpx").setLevel(logging.WARNING)
logging.getLogger("telegram").setLevel(logging.WARNING)
```
2. Замените `logging.WARNING` на `logging.INFO` для подробных логов
3. **Внимание**: В подробных логах могут отображаться токены API в URL запросов


## Основные возможности

- **Безопасность:** Все соединения шифруются и выполняются в headless Chromium для обеспечения безопасности.
- **Авторизация в WhatsApp:** Получение QR-кода для входа прямо в Telegram.
- **Сохранение сессии:** Не нужно сканировать QR-код при каждом перезапуске бота.
- **Отправка сообщений:** Отправка текстовых сообщений в любой чат или группу WhatsApp.
- **Отправка файлов:** Поддержка отправки документов и изображений.
- **Отложенная отправка сообщений:** Возможность запланировать отправку сообщений на определенное время.

## Настройка и запуск (для своего экземпляра бота)

Если вы хотите запустить своего собственного бота, следуйте этим инструкциям.

### 1. Клонирование репозитория

```bash
git clone https://github.com/msgcg/whatsapp-scheduler.git
cd whatsapp-scheduler
```

### 2. Настройка окружения

Рекомендуется использовать виртуальное окружение Python.

```bash
python -m venv venv
source venv/bin/activate  # Для Linux/macOS
# venv\Scripts\activate    # Для Windows
```

### 3. Настройка переменных окружения

Создайте файл `.env` в корне проекта, скопировав из `.env.sample`:

```bash
cp .env.sample .env
```

Откройте файл `.env` и заполните его:

- `TELEGRAM_TOKEN`: Ваш токен Telegram-бота. Получить его можно у [@BotFather](https://t.me/BotFather).

### 4. Установка зависимостей

Установите все необходимые библиотеки:

```bash
pip install -r requirements.txt
```

### 5. Установка браузеров для Playwright

Playwright требует установки браузеров для работы. Выполните команду:

```bash
playwright install chromium
```

### 6. Запуск бота

```bash
python bot.py
```

Бот запущен и готов к работе.

## Команды бота

- `/start` - Показывает приветственное сообщение.
- `/login` - Запускает процесс входа в WhatsApp. Бот пришлет QR-код, который нужно отсканировать с помощью WhatsApp на телефоне.
- `/send "Имя чата" "Текст сообщения"` - Отправляет текстовое сообщение.
  - *Пример:* `/send "Рабочий чат" "Всем привет!"`
- `/send_document "Имя чата" + вложение ` - Отправляет документ из Telegram в указанный чат.

