# WhatsApp-Telegram Bot

Этот проект представляет собой Telegram-бота, написанного на Python, для автоматизации отправки сообщений и файлов в WhatsApp.

Бот использует Playwright для взаимодействия с WhatsApp Web в headless-режиме и управляется через команды в Telegram.

## Публичный бот

Публичная версия этого бота размещена по адресу: [https://t.me/whatsapp_shedbot](https://t.me/whatsapp_shedbot).

Для получения доступа к публичному боту, начните диалог и используйте команду `/request_access`. Администратор рассмотрит ваш запрос.

## Основные возможности

- **Безопасность:** Управление доступом на основе запросов. Администратор полностью контролирует, кто может использовать бота.
- **Авторизация в WhatsApp:** Получение QR-кода для входа прямо в Telegram.
- **Сохранение сессии:** Не нужно сканировать QR-код при каждом перезапуске бота.
- **Отправка сообщений:** Отправка текстовых сообщений в любой чат или группу WhatsApp.
- **Отправка файлов:** Поддержка отправки документов и изображений.

## Настройка и запуск (для своего экземпляра бота)

Если вы хотите запустить своего собственного бота, следуйте этим инструкциям.

### 1. Клонирование репозитория

```bash
git clone https://github.com/msgcg/whatsapp-scheduler.git
cd whatsapp-scheduler
```

### 2. Настройка окружения

Рекомендуется использовать виртуальное окружение Python.

```bash
python -m venv venv
source venv/bin/activate  # Для Linux/macOS
# venv\Scripts\activate    # Для Windows
```

### 3. Настройка переменных окружения

Создайте файл `.env` в корне проекта, скопировав из `.env.sample`:

```bash
cp .env.sample .env
```

Откройте файл `.env` и заполните его:

- `TELEGRAM_TOKEN`: Ваш токен Telegram-бота. Получить его можно у [@BotFather](https://t.me/BotFather).
- `ADMIN_ID`: Ваш числовой ID в Telegram. Можете узнать его у бота [@userinfobot](https://t.me/userinfobot).

### 4. Установка зависимостей

Установите все необходимые библиотеки:

```bash
pip install -r requirements.txt
```

### 5. Установка браузеров для Playwright

Playwright требует установки браузеров для работы. Выполните команду:

```bash
playwright install
```

### 6. Запуск бота

```bash
python bot.py
```

Бот запущен и готов к работе.

## Команды бота

### Для всех пользователей

- `/start` - Показывает приветственное сообщение.
- `/request_access` - Отправляет администратору запрос на получение доступа к боту.

### Для авторизованных пользователей

- `/login` - Запускает процесс входа в WhatsApp. Бот пришлет QR-код, который нужно отсканировать с помощью WhatsApp на телефоне.
- `/send "Имя чата" "Текст сообщения"` - Отправляет текстовое сообщение.
  - *Пример:* `/send "Рабочий чат" "Всем привет!"`
- `/send_file "Имя чата"` - Запускает процесс отправки файла. После этой команды просто отправьте боту документ или изображение.
- `/cancel` - Отменяет текущую операцию (например, отправку файла).

### Только для администратора

- `/add_user <user_id>` - Добавляет пользователя в список авторизованных по его ID в Telegram.
- `/remove_user <user_id>` - Удаляет пользователя из списка авторизованных.
- `/list_users` - Показывает список ID всех авторизованных пользователей.